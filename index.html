<!DOCTYPE HTML>
<html>
	<title>Callum's Portfolio</title>
	<head>
		<link rel="stylesheet" type="text/css" href="index.css">
		<script src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script>
			var imgExt = '.png';
			var hoverExt = '_over' + imgExt;
			var downloadImgPath = './images/download';
			var gProjects = 
			[
				{
					name: 'Krypta Editor',
					repo: 'http://github.com/terrorcell/KryptaEditorQT',
					titlePath: './images/KryptaEditorQT/title',
					links: [
						'./images/KryptaEditorQT/1.png',
						'./images/KryptaEditorQT/2.png',
						'./images/KryptaEditorQT/3.png',
						'./images/KryptaEditorQT/4.png',
						'./images/KryptaEditorQT/5.png',
						'./images/KryptaEditorQT/6.png',
						'./images/KryptaEditorQT/7.png',
						'./images/KryptaEditorQT/8.png',
					],
					index: 0,
					download: ''
				},
				{
					name: 'System Command',
					repo: 'http://github.com/terrorcell/7dRTS',
					titlePath: './images/7dRTS/title',
					links: [
						'./images/7dRTS/1.png',
						'./images/7dRTS/2.png',
						'./images/7dRTS/3.png',
						'./images/7dRTS/4.png',
						'./images/7dRTS/5.png'
					],
					index: 3,
					download: ''
				},
				{
					name: 'Notes Oblitus',
					repo: 'http://github.com/terrorcell/NotesOblitus',
					titlePath: './images/NotesOblitus/title',
					links: [
						'./images/NotesOblitus/1.png',
						'./images/NotesOblitus/2.png',
						'./images/NotesOblitus/3.png',
						'./images/NotesOblitus/4.png',
						'./images/NotesOblitus/5.png'
					],
					index: 0,
					download: 'https://dl.dropboxusercontent.com/u/28551411/NotesOblitus.zip'
				}
			];
			
			function preloadImages()
			{
				var paths = [];
				$.each(gProjects, function(i, val)
				{
					paths.push(val.titlePath + hoverExt);
				});
				paths.push(downloadImgPath + hoverExt);
				
				$.each(paths, function(i, val)
				{
					$('<img />').attr('src', val);
				});
			}
			
			$(document).ready(function() 
			{
				var finalHtml = '';
				for (var i = 0; i < gProjects.length; ++i)
				{
					var p = gProjects[i];
					finalHtml += '<div class="project">';
					finalHtml += '<a href="' + p.repo + '">';
					finalHtml += '<img class="prjtitle" id="prj' + i + '" src="' + p.titlePath + '.png" /></a></br>';
					finalHtml += '<img class="prjimg" id="prj' + i + '" src="' + p.links[p.index] + '" />';
					if (p.download.length > 0)
					{
						finalHtml += '</br><a href="' + p.download + '">';
						finalHtml += '<img class="prjdownload" id="' + i + '" src="' + downloadImgPath + imgExt + '" /></a>';
					}
					finalHtml += '</div>';
				}
				$('#main').html(finalHtml);
				var width = $(window).width() / 4;
				var height = $(window).width() / 5;
				$('.prjimg').width(width + 'px');
				$('.prjimg').height(height + 'px');
				
				window.setInterval(function()
				{
					$('img.prjimg').each(function(gindex)
					{
						var index = gProjects[gindex].index + 1;
						if (index >= gProjects[gindex].links.length)
							index = 0;
						$(this).attr('src', gProjects[gindex].links[index]);
						gProjects[gindex].index = index;
					});
				}, 3000);
				preloadImages();
			});
			
			$(document).on('click', 'img.prjimg', function()
			{
				var id = $(this).attr("id");
				var gindex = Number(id.slice(-1));
				var index = gProjects[gindex].index + 1;
				if (index >= gProjects[gindex].links.length)
					index = 0;
				$(this).attr('src', gProjects[gindex].links[index]);
				gProjects[gindex].index = index;
			});
			
			$(document).on('mouseenter', 'img.prjtitle', function()
			{
				var id = $(this).attr("id");
				var gindex = Number(id.slice(-1));
				$(this).attr('src', gProjects[gindex].titlePath + hoverExt);
			});
			
			$(document).on('mouseleave', 'img.prjtitle', function()
			{
				var id = $(this).attr("id");
				var gindex = Number(id.slice(-1));
				$(this).attr('src', gProjects[gindex].titlePath + imgExt);
			});
			
			$(document).on('mouseenter', 'img.prjdownload', function()
			{
				$(this).attr('src', downloadImgPath + hoverExt);
			});
			
			$(document).on('mouseleave', 'img.prjdownload', function()
			{
				$(this).attr('src', downloadImgPath + imgExt);
			});
		</script>
	</head>
	<body>
		<div id="header">
			<img id="banner" src="./images/header.png" />
		</div>
		<div id="main"></div>
	</body>
</html>